name: Bug Report
description: Report a bug or unexpected behavior
labels: ["bug", "needs-triage"]
body:
  - type: markdown
    attributes:
      value: |
        Thanks for taking the time to report a bug. Please fill out the sections below to help us diagnose and fix the issue quickly.

        **Security issue?** Do not use this form. See [SECURITY.md](../../SECURITY.md) for the private reporting process.

  - type: dropdown
    id: component
    attributes:
      label: Component
      description: Which part of the system is affected?
      options:
        - services/core (Django backend API)
        - services/intelligence (data harvesters / analytics)
        - web (Next.js dashboard)
        - mobile (Flutter app)
        - gateway (edge / IoT)
        - schemas (shared data models)
        - devops (Docker / Kubernetes / CI)
        - documentation
        - other
    validations:
      required: true

  - type: textarea
    id: description
    attributes:
      label: Description
      description: A clear and concise description of the bug.
      placeholder: What happened? What did you expect to happen?
    validations:
      required: true

  - type: textarea
    id: steps
    attributes:
      label: Steps to reproduce
      description: Minimal steps that reliably reproduce the issue.
      placeholder: |
        1. Start the stack with `docker compose -f docker-compose.dev.yml up`
        2. Navigate to ...
        3. Perform action ...
        4. Observe error ...
    validations:
      required: true

  - type: textarea
    id: environment
    attributes:
      label: Environment
      description: Versions and platform details.
      placeholder: |
        - OS: Ubuntu 22.04 / macOS 14 / Windows 11
        - Docker version: 25.x
        - Python version: 3.11
        - Node version: 20.x
        - Flutter version: 3.x
        - Branch / commit: main @ abc1234
    validations:
      required: true

  - type: textarea
    id: logs
    attributes:
      label: Relevant logs or error output
      description: Paste logs here. They will be automatically formatted as code.
      render: shell

  - type: checkboxes
    id: checklist
    attributes:
      label: Checklist
      options:
        - label: I have searched existing issues and this is not a duplicate.
          required: true
        - label: This is not a security vulnerability (I would use SECURITY.md for that).
          required: true
